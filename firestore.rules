rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // ユーザーコレクション: 誰でも読み書き可能（簡易実装）
    match /users/{userId} {
      allow read, write: if true;
    }
    
    // SEマスターコレクション: 誰でも読み取り可能
    match /se_master/{seId} {
      allow read: if true;
      allow write: if false; // 管理者のみ（手動で追加）
    }
    
    // ユーザーSEコレクション: 誰でも読み取り可能
    match /user_ses/{userSeId} {
      allow read: if true;
      allow write: if true; // Cloud Functionsから書き込み
    }
    
    // クイズ正解数コレクション: 誰でも読み書き可能
    match /user_quiz_scores/{docId} {
      allow read: if true;
      allow write: if true; // ユーザーがクイズに回答
    }
  }
}
